# Briefing File Template

Canonical template for per-task briefing files generated by `writing-plans`. Each briefing file lives at `.claude/plans/<plan-id>/briefings/task-NN.md` and is read by the dispatched agent at runtime.

The briefing is the agent's complete task specification. It must be self-contained — the agent has no conversation history and will not read the orchestration plan.

---

## Template

```markdown
# Task NN: [Component Name]

## Architectural Context

[2-3 sentences: where this component fits in the system, what it depends on, why it exists. Reference specific files or modules the agent will need to understand.]

## File Ownership

**May modify:**
- `exact/path/to/file.ts`
- `exact/path/to/file.test.ts`

**Must not touch:**
- `exact/path/to/adjacent-but-unrelated.ts`

**Read for context (do not modify):**
- `exact/path/to/dependency.ts` — [why this is relevant]

## Steps

### Step 1: Write the failing test

\```typescript
// exact test code
\```

### Step 2: Run test to verify it fails

Run: `npm test -- path/to/test.ts`
Expected: FAIL with "[specific error message]"

### Step 3: Write minimal implementation

\```typescript
// exact implementation code
\```

### Step 4: Run test to verify it passes

Run: `npm test -- path/to/test.ts`
Expected: PASS

### Step 5: Commit

\```bash
git add path/to/file.ts path/to/file.test.ts
git commit -m "feat: [specific commit message]"
\```

[Repeat step groups for additional changes within this task]

## Success Criteria

- [ ] Tests pass: `npm test -- path/to/test.ts`
- [ ] No new lint warnings: `npm run lint -- --quiet`
- [ ] Types check: `npm run typecheck`
- [ ] [Feature-specific acceptance criterion]

## Anti-patterns

- Do NOT modify files outside the ownership list above
- Do NOT modify CLAUDE.md or any persistent configuration files
- Do NOT add features beyond what is specified in the steps
- [Task-specific anti-pattern if applicable]
```

---

## Authoring Guidelines

- **Architectural Context**: Must orient the agent in 2-3 sentences. Reference concrete file paths, not abstract concepts.
- **File Ownership**: Explicit allowlist. If the task touches 5+ files, consider splitting into smaller tasks.
- **Steps**: Same bite-sized TDD granularity as the current `writing-plans` task structure. Complete code — never "add validation" without showing the code.
- **Success Criteria**: Must be verifiable with exact commands. Every criterion maps to a command the agent can run.
- **Anti-patterns**: Include at least the 3 universal anti-patterns (file ownership, CLAUDE.md, scope creep) plus any task-specific ones.

## Size Target

Each briefing file should be under 50 lines of meaningful content (excluding code blocks). If a briefing exceeds this, the task is too large — split it.
